---
title: Stagehand in Python
description: Python is a popular language for automation, data extraction, and AI applications. Stagehand provides a Python SDK that brings the power of AI-driven browser automation to Python developers.
---

<Tip>
We'll be using the [Browserbase SDK](https://docs.browserbase.com/reference/sdk) for our browser. Running Stagehand without Browserbase is very difficult, since it requires a browser instance to be running.
</Tip>

<Card
  title="Check out the Stagehand Python Examples"
  icon="github"
  href="https://github.com/browserbase/stagehand-python-examples"
>
  Clone our [GitHub repo](https://github.com/browserbase/stagehand-python-examples) to get started with Stagehand in Python.
</Card>

## Installation

Install Stagehand Python SDK along with required dependencies:

<Tabs>
	<Tab title="pip">
	```bash
	pip install stagehand-py browserbase-sdk playwright
	```
	</Tab>

	<Tab title="poetry">
	```bash
	poetry add stagehand-py browserbase-sdk playwright
	```
	</Tab>

	<Tab title="conda">
	```bash
	conda install -c conda-forge stagehand-py browserbase-sdk playwright
	```
	</Tab>
</Tabs>

## Environment Setup

Set up your environment variables in a `.env` file or export them in your shell:

```bash
export BROWSERBASE_API_KEY="your_browserbase_api_key"
export BROWSERBASE_PROJECT_ID="your_browserbase_project_id"
export OPENAI_API_KEY="your_openai_api_key"  # or ANTHROPIC_API_KEY
```

## Basic Example (Async)

Here's a basic example showing how to use Stagehand Python SDK with async/await pattern:

```python example.py
import asyncio
import os
from stagehand import Stagehand, StagehandConfig
from stagehand.schemas import AvailableModel

async def main():
    """
    Basic example of using Stagehand Python SDK
    """
    # Initialize Stagehand with configuration
    config = StagehandConfig(
        env="BROWSERBASE",
        api_key=os.getenv("BROWSERBASE_API_KEY"),
        project_id=os.getenv("BROWSERBASE_PROJECT_ID"),
        headless=True,
        verbose=1,
        model_name=AvailableModel.CLAUDE_3_7_SONNET_LATEST,
        model_client_options={
            "api_key": os.getenv("ANTHROPIC_API_KEY")
        }
    )
    
    # Create Stagehand instance
    stagehand = Stagehand(config)
    
    try:
        # Initialize the browser session
        await stagehand.init()
        
        # Get the page object (similar to Playwright's page)
        page = stagehand.page
        
        # Navigate to a website
        await page.goto("https://docs.stagehand.dev/")
        
        # Use AI to click on elements using natural language
        await page.act("click the quickstart link")
        
        # Extract structured data from the page
        result = await page.extract(
            instruction="extract the main heading of the page",
            schema={
                "type": "object",
                "properties": {
                    "title": {"type": "string"}
                },
                "required": ["title"]
            }
        )
        
        print(f"Extracted title: {result['title']}")
        
        # Observe elements on the page (useful for planning actions)
        observations = await page.observe("find all navigation links")
        print(f"Found {len(observations)} navigation elements")
        
    finally:
        # Always close the session
        await stagehand.close()

if __name__ == "__main__":
    asyncio.run(main())
```

## Synchronous Example

For simpler scripts or when async/await isn't needed, you can use the synchronous version:

```python example_sync.py
import os
from stagehand import StagehandSync, StagehandConfig
from stagehand.schemas import AvailableModel

def main():
    """
    Synchronous example of using Stagehand Python SDK
    """
    # Initialize Stagehand with configuration
    config = StagehandConfig(
        env="BROWSERBASE",
        api_key=os.getenv("BROWSERBASE_API_KEY"),
        project_id=os.getenv("BROWSERBASE_PROJECT_ID"),
        headless=True,
        verbose=1,
        model_name=AvailableModel.GPT_4O,
        model_client_options={
            "api_key": os.getenv("OPENAI_API_KEY")
        }
    )
    
    # Create synchronous Stagehand instance
    stagehand = StagehandSync(config)
    
    try:
        # Initialize the browser session
        stagehand.init()
        
        # Get the page object
        page = stagehand.page
        
        # Navigate and interact with the page
        page.goto("https://example.com")
        page.act("click the contact link")
        
        # Fill out a form using natural language
        page.act("fill the name field with 'John Doe'")
        page.act("fill the email field with 'john@example.com'")
        page.act("fill the message field with 'Hello from Stagehand!'")
        
        # Extract form data to verify
        form_data = page.extract(
            instruction="extract all form field values",
            schema={
                "type": "object",
                "properties": {
                    "name": {"type": "string"},
                    "email": {"type": "string"},
                    "message": {"type": "string"}
                }
            }
        )
        
        print("Form data:", form_data)
        
    finally:
        stagehand.close()

if __name__ == "__main__":
    main()
```

## Using the Agent (Async)

For more complex tasks, you can use Stagehand's Agent functionality that can autonomously execute larger workflows:

```python agent_example.py
import asyncio
import os
from stagehand import Stagehand, StagehandConfig
from stagehand.schemas import AvailableModel

async def main():
    """
    Example using Stagehand Agent for autonomous task execution
    """
    config = StagehandConfig(
        env="BROWSERBASE",
        api_key=os.getenv("BROWSERBASE_API_KEY"),
        project_id=os.getenv("BROWSERBASE_PROJECT_ID"),
        headless=False,  # Set to False to see the browser in action
        verbose=2,
        model_name=AvailableModel.CLAUDE_3_7_SONNET_LATEST,
        model_client_options={
            "api_key": os.getenv("ANTHROPIC_API_KEY")
        }
    )
    
    stagehand = Stagehand(config)
    
    try:
        await stagehand.init()
        
        # Navigate to a starting page
        await stagehand.page.goto("https://www.google.com")
        
        # Create an agent with custom instructions
        agent = stagehand.agent(
            instructions="""You are a helpful assistant that can browse the web.
            Be thorough in your research and provide detailed information.
            Always verify information from multiple sources when possible."""
        )
        
        # Execute a complex task autonomously
        result = await agent.execute(
            "Search for the latest news about AI developments in 2024 and summarize the top 3 stories"
        )
        
        print("Agent result:")
        print(result)
        
    finally:
        await stagehand.close()

if __name__ == "__main__":
    asyncio.run(main())
```

## Agent with Synchronous API

```python agent_example_sync.py
import os
from stagehand import StagehandSync, StagehandConfig
from stagehand.schemas import AvailableModel

def main():
    """
    Synchronous example using Stagehand Agent
    """
    config = StagehandConfig(
        env="BROWSERBASE",
        api_key=os.getenv("BROWSERBASE_API_KEY"),
        project_id=os.getenv("BROWSERBASE_PROJECT_ID"),
        headless=True,
        verbose=1,
        model_name=AvailableModel.GPT_4O,
        model_client_options={
            "api_key": os.getenv("OPENAI_API_KEY")
        }
    )
    
    stagehand = StagehandSync(config)
    
    try:
        stagehand.init()
        
        # Navigate to a starting page
        stagehand.page.goto("https://news.ycombinator.com")
        
        # Create and use an agent
        agent = stagehand.agent(
            instructions="""You are a research assistant specialized in technology news.
            Focus on finding the most relevant and recent information."""
        )
        
        # Execute a research task
        result = agent.execute(
            "Find the top 5 most popular posts on this page and summarize what they're about"
        )
        
        print("Research results:")
        print(result)
        
    finally:
        stagehand.close()

if __name__ == "__main__":
    main()
```

## Configuration Options

The `StagehandConfig` class provides various options to customize behavior:

```python
from stagehand import StagehandConfig
from stagehand.schemas import AvailableModel

config = StagehandConfig(
    # Environment and API configuration
    env="BROWSERBASE",  # or "LOCAL" for local browser
    api_key="your_browserbase_api_key",
    project_id="your_browserbase_project_id",
    
    # Browser settings
    headless=True,  # Run browser in headless mode
    
    # Model configuration
    model_name=AvailableModel.CLAUDE_3_7_SONNET_LATEST,
    model_client_options={
        "api_key": "your_model_api_key"
    },
    
    # Timing and behavior
    dom_settle_timeout_ms=5000,  # Wait for DOM to settle
    verbose=1,  # Logging level (0-3)
    
    # Advanced options
    enable_caching=True,  # Cache observations for better performance
    self_heal=True,  # Attempt to recover from errors
)
```

## Error Handling

Always implement proper error handling in your Python scripts:

```python
import asyncio
from stagehand import Stagehand, StagehandConfig
from stagehand.exceptions import StagehandError

async def robust_automation():
    stagehand = None
    try:
        config = StagehandConfig(
            env="BROWSERBASE",
            api_key=os.getenv("BROWSERBASE_API_KEY"),
            project_id=os.getenv("BROWSERBASE_PROJECT_ID"),
        )
        
        stagehand = Stagehand(config)
        await stagehand.init()
        
        # Your automation code here
        await stagehand.page.goto("https://example.com")
        await stagehand.page.act("click the login button")
        
    except StagehandError as e:
        print(f"Stagehand error: {e}")
    except Exception as e:
        print(f"Unexpected error: {e}")
    finally:
        if stagehand:
            await stagehand.close()

asyncio.run(robust_automation())
```

## Integration with Data Science Workflows

Stagehand Python SDK integrates well with popular data science libraries:

```python
import pandas as pd
from stagehand import StagehandSync, StagehandConfig

def scrape_to_dataframe():
    """
    Example of scraping data and converting to pandas DataFrame
    """
    stagehand = StagehandSync(StagehandConfig(
        env="BROWSERBASE",
        api_key=os.getenv("BROWSERBASE_API_KEY"),
        project_id=os.getenv("BROWSERBASE_PROJECT_ID"),
    ))
    
    try:
        stagehand.init()
        stagehand.page.goto("https://example-ecommerce.com/products")
        
        # Extract structured product data
        products = stagehand.page.extract(
            instruction="extract all products with their names, prices, and ratings",
            schema={
                "type": "object",
                "properties": {
                    "products": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "name": {"type": "string"},
                                "price": {"type": "string"},
                                "rating": {"type": "number"}
                            }
                        }
                    }
                }
            }
        )
        
        # Convert to pandas DataFrame
        df = pd.DataFrame(products['products'])
        return df
        
    finally:
        stagehand.close()

# Usage
df = scrape_to_dataframe()
print(df.head())
print(f"\nTotal products: {len(df)}")
print(f"Average rating: {df['rating'].mean():.2f}")
```

## Next Steps

- Explore the [GitHub examples repository](https://github.com/browserbase/stagehand-python-examples) for more code samples
- Check out the [CrewAI integration](/integrations/crew-ai) for AI agent workflows
- Learn about [caching strategies](/examples/caching) to optimize performance
- Review [best practices](/examples/best_practices) for production usage

## Additional Resources

- [Stagehand Python SDK GitHub Repository](https://github.com/browserbase/stagehand-python)
- [Browserbase Documentation](https://docs.browserbase.com)
- Join the [Stagehand Slack community](https://stagehand.dev/slack) for support and community discussions 